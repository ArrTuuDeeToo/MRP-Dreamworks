<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Order Summary</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2e2e2e;
            color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

       .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

       .menu,.summary {
            background-color: #444;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
        }

        h2 {
            text-align: center;
        }

       .items,.discounts {
            margin-top: 15px;
        }

       .item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

       .category {
            margin-top: 15px;
        }

       .category h3 {
            margin-top: 0;
        }

        button {
            background-color: #777;
            color: white;
            border: none;
            padding: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="menu">
            <h2>Item Menu</h2>
            <div class="category">
                <h3>Repairs</h3>
                <div class="items">
                    <div class="item">
                        <span> S CLASS REPAIRS (ALL PD CARS) - $5000</span>
                        <button onclick="addItem('S CLASS REPAIRS (ALL PD CARS)', 5000, 1)">+1</button>
                    </div>
                    <div class="item">
                        <span> A CLASS REPAIRS - $4000</span>
                        <button onclick="addItem('A CLASS REPAIRS', 4000, 1)">+1</button>
                    </div>
                    <div class="item">
                        <span> B-D CLASS REPAIRS - $2500</span>
                        <button onclick="addItem('B-D CLASS REPAIRS', 2500, 1)">+1</button>
                    </div>
                    <div class="item">
                        <span> REPAIR KIT - $2500</span>
                        <button onclick="addItem('REPAIR KIT', 2500, 4)">+4</button>
                    </div>
                    <div class="item">
                        <span> ADVANCED REPAIR KIT - $5500</span>
                        <button onclick="addItem('ADVANCED REPAIR KIT', 5500, 4)">+4</button>
                    </div>
                </div>
            </div>
            <div class="category">
                <h3>Items</h3>
                <div class="items">
                    <div class="item">
                        <span> LOCKPICKS - $1500 </span>
                        <button onclick="addItem('LOCKPICKS', 1000, 1)">+1</button>
                        <button onclick="addItem('LOCKPICKS', 1500, 3)">+3</button>
                    </div>
                    <div class="item">
                        <span> ADVANCED LOCKPICKS - $6000</span>
                        <button onclick="addItem('ADVANCED LOCKPICKS', 6000, 3)">+3</button>
                    </div>
                    <div class="item">
                        <span> MATERIALS - 3</span>
                        <button onclick="addItem('MATERIALS', 3, 1)">+1</button>
                        <button onclick="addItem('MATERIALS', 3, 10)">+10</button>
                        <button onclick="addItem('MATERIALS', 3, 100)">+100</button>
                    </div>
                    <div class="item">
                        <span> CAR CLEANING KIT - $2500</span>
                        <button onclick="addItem('CAR CLEANING KIT', 2500, 4)">+4</button>
                    </div>
                </div>
            </div>
            <div class="category">
                <h3>Upgrades</h3>
                <div class="items">
                    <div class="item">
                        <span> TURBO - $15000</span>
                        <button onclick="addItem('TURBO', 15000, 1)">+1</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="summary">
            <h2>Order Summary</h2>
            <div id="order-list"></div>
            <div id="subtotal"></div>
            <button id="clear-order" onclick="clearOrder()">Clear Order</button>
            <button id="save-as-favorite" onclick="saveAsFavorite()">Save as Favorite</button>
            <button id="complete-order" onclick="completeOrder()">Complete Order</button>
        </div>
    </div>

    <script>
        let order = {};

        function addItem(name, price, quantity) {
            if (!order[name]) {
                order[name] = { price, quantity: 0 };
            }
            order[name].quantity += quantity;
            updateOrderSummary();
        }

        function updateOrderSummary() {
            const orderList = document.getElementById("order-list");
            const subtotalDisplay = document.getElementById("subtotal");

            let orderSummaryText = "";
            let subtotal = 0;

            for (const [name, item] of Object.entries(order)) {
                orderSummaryText += `<li>${name} x ${item.quantity} = $${(item.price * item.quantity).toFixed(2)}</li>`;
                subtotal += item.price * item.quantity;
            }

            orderList.innerHTML = `<ul>${orderSummaryText}</ul>`;
            subtotalDisplay.textContent = `Subtotal: $${subtotal.toFixed(2)}`;
        }

        function clearOrder() {
            order = {};
            updateOrderSummary();
        }

        function saveAsFavorite() {
            if (Object.keys(order).length) {
                const newFavorite = {
                   ...order,
                    name: `Favorite ${favorites.length + 1}`
                };
                favorites.push(newFavorite);
                localStorage.setItem('favorites', JSON.stringify(favorites));
                updateFavorites();
            }
        }

        function updateFavorites() {
            const favoritesList = document.getElementById("favorites-list");
            if (!favorites.length) {
                favoritesList.innerHTML = "No favorite orders saved";
            } else {
                favoritesList.innerHTML = favorites
                   .map((fav, i) => `
                        <div class="favorite-item">
                            <div class="favorite-name">
                                <span onclick="startRename(${i})">${fav.name}</span>
                            </div>
                            <div class="favorite-actions">
                                <button onclick="loadFavorite(${i})">Load</button>
                                <button onclick="renameFavorite(${i})" class="rename-button">Rename</button>
                                <button onclick="deleteFavorite(${i})" class="delete-button">Delete</button>
                            </div>
                        </div>
                    `)
                   .join("");
            }
        }

        function startRename(index) {
            const favoriteNameElement = document.querySelector(`#favorites-list.favorite-item:nth-child(${index + 1}).favorite-name`);
            const currentName = favorites[index].name;
            favoriteNameElement.innerHTML = `
                <input type="text" value="${currentName}" onblur="finishRename(${index}, this.value)" onkeypress="handleRenameKeyPress(event, ${index}, this)">
            `;
            favoriteNameElement.querySelector('input').focus();
        }

        function handleRenameKeyPress(event, index, input) {
            if (event.key === 'Enter') {
                finishRename(index, input.value);
            }
        }

        function renameFavorite(index) {
            startRename(index);
        }

        function finishRename(index, newName) {
            if (newName.trim()) {
                favorites[index].name = newName.trim();
                localStorage.setItem('favorites', JSON.stringify(favorites));
                updateFavorites();
            }
        }

        function deleteFavorite(index) {
            favorites.splice(index, 1);
            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateFavorites();
        }

        function loadFavorite(index) {
            order = {...favorites[index] };
            delete order.name; // Remove the name property from the loaded order
            updateOrderSummary();
        }
    </script>
</body>
</html>
